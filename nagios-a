!#/bin/bash
# Centos 7 Machine
# sudo su
yum -y install nagios
systemctl enable nagios
setenforce 0
systemctl start nagios
yum -y install httpd
systemctl enable httpd
systemctlstart httpd
yum -y install nrpe
systemctl enable nrpe
systemctl start nrpe
yum -y install nagios-plugins-all
yum -y install nagios-plugins-nrpe
htpasswd -b -c /etc/nagios/passwd nagiosadmin nagiosadmin
# password set to 12qwaszx+1
chmod 666 /var/log/nagios/nagios.log
systemctl restart nagios
echo 'define command{
                                command_name check_nrpe
                                command_line /usr/lib64/nagios/plugins/check_nrpe -H $HOSTADDRESS$ -c $ARG1$
                                }' >> /etc/nagios/objects/commands.cfg
# verify ( prefly )
/usr/sbin/nagios -v /etc/nagios/nagios.cfg

# Baby Web server - For Google cloud make sure it is in the same zone as the Nagios server

# yum -y install httpd
# systemctl enable httpd
# systemctl start httpd



